'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};(function(a){var b={PICTURE_CDN:'https://cdn.onepage.space',CDN_HOST:'http://localhost:4000'},c=function(a){var b={};return a.files.forEach(function(a){b[a.gid]=a}),a.foldersAndFiles.folders.forEach(function(a){a.files.forEach(function(a){b[a.gid]&&b[a.gid].children.length&&b[a.gid].children[0].url&&(a.publicURL=b[a.gid].children[0].url)})}),a},d=function(a){var b=document.createElement('div');b.className='one-page-plugin-image';var c=document.createElement('img');return c.className='one-page-plugin-folder-image',c.src=a,b.appendChild(c),b},e=function(a){return a.map(function(a){var c=document.createElement('div');c.className='one-page-plugin-folder';var e=document.createElement('div');e.className='one-page-plugin-img-container',a.files.forEach(function(a){if('image'===a.fileType){var c=b.PICTURE_CDN+'/'+a.bucketRegionPrefix+'/'+a.publicURL,f=d(c);e.appendChild(f)}}),c.appendChild(e);var f=document.createElement('p');f.className='one-page-plugin-folder-description',f.innerText=a.description,c.appendChild(f);var g=document.createElement('p');return g.className='one-page-plugin-folder-title',g.innerText=a.title,c.appendChild(g),c})},f=function(a){if(!a&&!a.foldersAndFiles&&!a.foldersAndFiles.folders&&!a.files.length)return[];var b=c(a);return e(b.foldersAndFiles.folders)},g=function(){var a=document.createElement('link');a.setAttribute('rel','preconnect'),document.head.appendChild(a);var b=document.createElement('link');b.setAttribute('rel','stylesheet'),b.setAttribute('type','text/css'),b.setAttribute('href','https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap'),document.head.appendChild(b);var c=document.createElement('style');c.appendChild(document.createTextNode('\n    .one-page-plugin-image {\n      width: 100%;\n      height: auto;\n    }\n    .one-page-plugin-img-container {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      flex-flow: nowrap;\n      padding: 0 15px;\n    }\n    .one-page-plugin-folder-image {\n      object-fit: cover;\n      width: 100%;\n    }\n    .one-page-plugin-image:not(:last-child){\n      margin-right: 20px;\n    }\n    p.one-page-plugin-folder-title {\n      font-family: \'Inter\', sans-serif;\n      font-size: 11px;\n      text-transform: uppercase;\n    }\n    p.one-page-plugin-folder-description {\n      font-family: \'Inter\', sans-serif;\n      margin-top: 18px;\n      margin-bottom: 5px;\n      line-height: 1.5;\n    }\n    .one-page-plugin-logo-image {\n      width: 95px;\n    }\n    .one-page-plugin-logo-text {\n      font-size: 10px;\n      margin-right: 5px;\n      vertical-align: text-top;\n    }\n    .one-page-plugin-logo-top {\n      border-bottom: 1px solid #9c9c9c;\n      margin-bottom: 21px;\n      padding-bottom: 2px;\n    }\n    .one-page-plugin-logo-bottom {\n      border-top: 1px solid #9c9c9c;\n      margin-bottom: 21px;\n      padding-top: 2px;\n    }')),document.head.appendChild(c)},h=function(a){var b=document.createElement('div');b.className=a;var c=document.createElement('img');c.className='one-page-plugin-logo-image',c.src='https://telex.onepage.space/app_logo_white.svg';var d=document.createElement('span');return d.className='one-page-plugin-logo-text',d.innerText='Powered by:',b.appendChild(d),b.appendChild(c),b},i=function(a,b){a.appendChild(h('one-page-plugin-logo-top'));var c=f(b);c.forEach(function(b){a.appendChild(b)}),a.appendChild(h('one-page-plugin-logo-bottom'))},j=function(a,c){var d=new XMLHttpRequest;d.open('GET',encodeURI(b.CDN_HOST+'/'+a),!0),d.onreadystatechange=function(){if(4===this.readyState)if(200===this.status)try{var a=JSON.parse(this.responseText);c(a)}catch(a){console.error('OnePage plugin: Error parsing JSON data:',a),c('NotSet')}else console.error('OnePage plugin: Error getting JSON data'),c('NotSet')},d.send()},k=function(a){b=Object.assign(_extends({},b,a))};'undefined'==typeof a.OnePage&&(a.OnePage={render:function d(a,b){var c=document.getElementById(b.replace('#',''));return c?void j(a,function(a){'NotSet'===a||(g(),i(c,a))}):void console.error('OnePage plugin: Cannot find root element')},init:k})})(window);
